# CloudPhoto-HW3

Домашняя работа №3 по курсу Введение в облачные технологии.

Облачная функция для идентификации лиц на фото и поиска людей на фото в хранилище.

## Настройка
1. Сервисному аккаунту выставить роли в каталоге serverless.functions.invoker и editor.
2. Создать API-ключ и статический ключ доступа.
3. Создать облачную функцию.
4. Добавить файл с зависимостями requirements.txt в облачную функцию. Добавить библиотеки boto3, requests.
5. Создать триггер. Тип триггера - Message Queue. Триггер будет вызывать созданную облачную функцию при создании новых сообщений в очередь. Выбирать соответствующий сервисный аккаунт, функцию и очередь.
6. Создать Telegram бота. И задать webhook с ссылкой на облачную функцию.
7. В облачной функции создать переменные окружения: aws_access_key_id, aws_secret_access_key, bucket_id, db_file_name, bot_token, chat_id.

## Схема работы:
1. При поступлении в очередь сообщения (Задание 2 пункт 5) со списком фотографий лиц триггер запускает облачную функцию.
2. Облачная функция каждую фотографию лица, котора есть в списке сообщения из очереди, отправляет пользователю через бота в Telegram с подписью “Кто это?”.
3. Пользователь отвечает на сообщение с фотографией, при получении ответа функция записывает полученые данные в существующий файл базы данных или создает новый файл.
4. Пользователь посылает Telegram Bot команду «/find {name}» и облачная функция ищет совпадения в базе данных, при нахождении совпадений функция отправляет все оригинальные фотографии,на которых был отмечен человек. Если таких оригинальных фотографий нет, то отправляется ответ "У пользователя с таким именем нет фотографий!".
